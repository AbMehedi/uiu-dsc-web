<%- include('partials/header') %>

<section class="page-header">
  <div class="container">
    <h1>Our <span class="text-gradient">Events</span></h1>
    <p>Join us for workshops, seminars, and exciting activities throughout the year</p>
  </div>
</section>

<section class="section events-section">
  <div class="container">
    <% if (upcomingEvents && upcomingEvents.length > 0) { %>
    <div class="section-header" style="margin-bottom: 3rem;">
      <span class="section-badge">Coming Soon</span>
      <h2>Upcoming Events</h2>
    </div>
    
    <div class="events-grid">
      <% upcomingEvents.forEach((event, index) => { %>
      <div class="card event-card fade-in stagger-<%= (index % 6) + 1 %>">
        <% 
        const statusLabels = {
          upcoming: 'Upcoming',
          ongoing: 'Ongoing',
          completed: 'Completed',
          cancelled: 'Cancelled'
        };
        %>
        <span class="event-status <%= event.status || 'upcoming' %>"><%= statusLabels[event.status] || 'Upcoming' %></span>
        <% if (event.imageUrl) { %>
          <div style="height: 200px; overflow: hidden; position: relative; background: var(--gradient-primary);">
            <img 
              src="<%= event.imageUrl %>" 
              alt="<%= event.title %>"
              style="width: 100%; height: 100%; object-fit: cover; display: block;"
              onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\'background: var(--gradient-primary); height: 200px; display: flex; align-items: center; justify-content: center;\'><svg xmlns=\'http://www.w3.org/2000/svg\' width=\'80\' height=\'80\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'currentColor\' stroke-width=\'1\' stroke-linecap=\'round\' stroke-linejoin=\'round\' style=\'opacity: 0.4;\'><rect x=\'3\' y=\'4\' width=\'18\' height=\'18\' rx=\'2\' ry=\'2\'></rect><line x1=\'16\' y1=\'2\' x2=\'16\' y2=\'6\'></line><line x1=\'8\' y1=\'2\' x2=\'8\' y2=\'6\'></line><line x1=\'3\' y1=\'10\' x2=\'21\' y2=\'10\'></line></svg></div>';" 
            >
          </div>
        <% } else { %>
          <div style="background: var(--gradient-primary); height: 200px; display: flex; align-items: center; justify-content: center;">
            <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.4;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
          </div>
        <% } %>
        <div class="card-content">
          <div class="event-date">
            <span class="event-date-day"><%= new Date(event.date).getDate() %></span>
            <span class="event-date-month"><%= new Date(event.date).toLocaleString('en-US', { month: 'short' }) %></span>
          </div>
          <h3 class="card-title"><%= event.title %></h3>
          <p class="card-text"><%= event.description %></p>
          <div class="card-meta">
            <span>ğŸ•’ <%= event.time %></span>
            <span>ğŸ“ <%= event.location %></span>
            <span>ğŸ‘¥ <%= event.seats %> seats</span>
          </div>
        </div>
      </div>
      <% }); %>
    </div>
    <% } else { %>
    <div class="empty-state" style="margin-bottom: 4rem;">
      <div class="empty-state-icon">ğŸ“…</div>
      <h3>No Upcoming Events</h3>
      <p>We're currently planning our next batch of exciting events. Check back soon or follow us on social media!</p>
      <a href="https://www.facebook.com/profile.php?id=61573382191627" target="_blank" class="btn btn-primary" style="margin-top: 1.5rem;">Follow for Updates</a>
    </div>
    <% } %>

    <% if (pastEvents && pastEvents.length > 0) { %>
    <div class="section-header" style="margin: 5rem 0 3rem;">
      <span class="section-badge">Archive</span>
      <h2>Past Events</h2>
      <p>Take a look at what we've accomplished together</p>
    </div>
    
    <div class="events-grid">
      <% pastEvents.forEach((event, index) => { %>
      <div class="card event-card fade-in stagger-<%= (index % 6) + 1 %>">
        <% 
        const pastStatusLabels = {
          upcoming: 'Upcoming',
          ongoing: 'Ongoing',
          completed: 'Completed',
          cancelled: 'Cancelled'
        };
        %>
        <span class="event-status <%= event.status || 'completed' %>"><%= pastStatusLabels[event.status] || 'Completed' %></span>
        <% if (event.imageUrl) { %>
          <div style="height: 200px; overflow: hidden; position: relative; background: linear-gradient(135deg, var(--dark-lighter), var(--dark));">
            <img 
              src="<%= event.imageUrl %>" 
              alt="<%= event.title %>"
              style="width: 100%; height: 100%; object-fit: cover; filter: grayscale(30%); display: block;"
              onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\'background: linear-gradient(135deg, var(--dark-lighter), var(--dark)); height: 200px; display: flex; align-items: center; justify-content: center;\'><svg xmlns=\'http://www.w3.org/2000/svg\' width=\'80\' height=\'80\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'currentColor\' stroke-width=\'1\' stroke-linecap=\'round\' stroke-linejoin=\'round\' style=\'opacity: 0.3;\'><path d=\'M22 11.08V12a10 10 0 1 1-5.93-9.14\'></path><polyline points=\'22 4 12 14.01 9 11.01\'></polyline></svg></div>';" 
            >
          </div>
        <% } else { %>
          <div style="background: linear-gradient(135deg, var(--dark-lighter), var(--dark)); height: 200px; display: flex; align-items: center; justify-content: center;">
            <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.3;"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
          </div>
        <% } %>
        <div class="card-content">
          <div class="event-date" style="background: var(--dark-lighter);">
            <span class="event-date-day"><%= new Date(event.date).getDate() %></span>
            <span class="event-date-month"><%= new Date(event.date).toLocaleString('en-US', { month: 'short' }) %></span>
          </div>
          <h3 class="card-title"><%= event.title %></h3>
          <p class="card-text"><%= event.description %></p>
          <div class="card-meta">
            <span>ğŸ“… <%= new Date(event.date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }) %></span>
            <span>ğŸ“ <%= event.location %></span>
          </div>
        </div>
      </div>
      <% }); %>
    </div>
    <% } %>
    
    <div style="text-align: center; margin-top: 4rem; padding: 2rem; background: rgba(99, 102, 241, 0.1); border-radius: var(--radius-xl); border: 1px solid rgba(99, 102, 241, 0.2);">
      <p style="color: var(--light); margin-bottom: 0.5rem;">Want to suggest an event or collaborate?</p>
      <a href="mailto:club@datascience.uiu.ac.bd" style="color: var(--primary-light); font-weight: 600;">club@datascience.uiu.ac.bd</a>
    </div>
  </div>
</section>

<%- include('partials/footer') %>
